"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/image/presign";
exports.ids = ["pages/api/image/presign"];
exports.modules = {

/***/ "aws-sdk/clients/s3":
/*!*************************************!*\
  !*** external "aws-sdk/clients/s3" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("aws-sdk/clients/s3");

/***/ }),

/***/ "zod":
/*!**********************!*\
  !*** external "zod" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("zod");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(api)/./src/config/image.ts":
/*!*****************************!*\
  !*** ./src/config/image.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MAX_FILE_SIZE\": () => (/* binding */ MAX_FILE_SIZE)\n/* harmony export */ });\nconst MAX_FILE_SIZE = 5000000 // 5MB\n;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvY29uZmlnL2ltYWdlLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxNQUFNQSxnQkFBZ0IsUUFBUSxNQUFNO0NBQVAiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LXRlbXBsYXRlLy4vc3JjL2NvbmZpZy9pbWFnZS50cz9iNDliIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBNQVhfRklMRV9TSVpFID0gNTAwMDAwMCAvLyA1TUJcclxuIl0sIm5hbWVzIjpbIk1BWF9GSUxFX1NJWkUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/config/image.ts\n");

/***/ }),

/***/ "(api)/./src/config/s3.ts":
/*!**************************!*\
  !*** ./src/config/s3.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ALLOWED_FILE_TYPES\": () => (/* binding */ ALLOWED_FILE_TYPES),\n/* harmony export */   \"S3_BUCKET_NAME\": () => (/* binding */ S3_BUCKET_NAME)\n/* harmony export */ });\nconst ALLOWED_FILE_TYPES = [\n    \"image/png\",\n    \"image/jpeg\"\n];\nconst S3_BUCKET_NAME = \"image-to-alt\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvY29uZmlnL3MzLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQU8sTUFBTUEscUJBQXFCO0lBQUM7SUFBYTtDQUFhO0FBQ3RELE1BQU1DLGlCQUFpQixlQUFjIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC10ZW1wbGF0ZS8uL3NyYy9jb25maWcvczMudHM/OTkwNCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgQUxMT1dFRF9GSUxFX1RZUEVTID0gWydpbWFnZS9wbmcnLCAnaW1hZ2UvanBlZyddXHJcbmV4cG9ydCBjb25zdCBTM19CVUNLRVRfTkFNRSA9ICdpbWFnZS10by1hbHQnXHJcbiJdLCJuYW1lcyI6WyJBTExPV0VEX0ZJTEVfVFlQRVMiLCJTM19CVUNLRVRfTkFNRSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/config/s3.ts\n");

/***/ }),

/***/ "(api)/./src/lib/api-middlewares/with-methods.ts":
/*!*************************************************!*\
  !*** ./src/lib/api-middlewares/with-methods.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"withMethods\": () => (/* binding */ withMethods)\n/* harmony export */ });\nfunction withMethods(methods, handler) {\n    return async function(req, res) {\n        if (!req.method || !methods.includes(req.method)) {\n            return res.status(405).end();\n        }\n        return handler(req, res);\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2FwaS1taWRkbGV3YXJlcy93aXRoLW1ldGhvZHMudHMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUVPLFNBQVNBLFlBQVlDLE9BQWlCLEVBQUVDLE9BQXVCLEVBQUU7SUFDdEUsT0FBTyxlQUFnQkMsR0FBbUIsRUFBRUMsR0FBb0IsRUFBRTtRQUNoRSxJQUFJLENBQUNELElBQUlFLE1BQU0sSUFBSSxDQUFDSixRQUFRSyxRQUFRLENBQUNILElBQUlFLE1BQU0sR0FBRztZQUNoRCxPQUFPRCxJQUFJRyxNQUFNLENBQUMsS0FBS0MsR0FBRztRQUM1QixDQUFDO1FBRUQsT0FBT04sUUFBUUMsS0FBS0M7SUFDdEI7QUFDRixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC10ZW1wbGF0ZS8uL3NyYy9saWIvYXBpLW1pZGRsZXdhcmVzL3dpdGgtbWV0aG9kcy50cz9jOTU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaUhhbmRsZXIsIE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0J1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhNZXRob2RzKG1ldGhvZHM6IHN0cmluZ1tdLCBoYW5kbGVyOiBOZXh0QXBpSGFuZGxlcikge1xyXG4gIHJldHVybiBhc3luYyBmdW5jdGlvbiAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcclxuICAgIGlmICghcmVxLm1ldGhvZCB8fCAhbWV0aG9kcy5pbmNsdWRlcyhyZXEubWV0aG9kKSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmVuZCgpXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGhhbmRsZXIocmVxLCByZXMpXHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJ3aXRoTWV0aG9kcyIsIm1ldGhvZHMiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwiaW5jbHVkZXMiLCJzdGF0dXMiLCJlbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/lib/api-middlewares/with-methods.ts\n");

/***/ }),

/***/ "(api)/./src/lib/s3.ts":
/*!***********************!*\
  !*** ./src/lib/s3.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"s3\": () => (/* binding */ s3)\n/* harmony export */ });\n/* harmony import */ var aws_sdk_clients_s3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aws-sdk/clients/s3 */ \"aws-sdk/clients/s3\");\n/* harmony import */ var aws_sdk_clients_s3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(aws_sdk_clients_s3__WEBPACK_IMPORTED_MODULE_0__);\n\nconst s3 = new (aws_sdk_clients_s3__WEBPACK_IMPORTED_MODULE_0___default())({\n    apiVersion: \"2006-03-01\",\n    accessKeyId: process.env.S3_ACCESS_KEY_ID,\n    secretAccessKey: process.env.S3_SECRET_ACCESS_KEY,\n    region: process.env.S3_REGION,\n    signatureVersion: \"v4\"\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL3MzLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFtQztBQUU1QixNQUFNQyxLQUFLLElBQUlELDJEQUFFQSxDQUFDO0lBQ3ZCRSxZQUFZO0lBQ1pDLGFBQWFDLFFBQVFDLEdBQUcsQ0FBQ0MsZ0JBQWdCO0lBQ3pDQyxpQkFBaUJILFFBQVFDLEdBQUcsQ0FBQ0csb0JBQW9CO0lBQ2pEQyxRQUFRTCxRQUFRQyxHQUFHLENBQUNLLFNBQVM7SUFDN0JDLGtCQUFrQjtBQUNwQixHQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC10ZW1wbGF0ZS8uL3NyYy9saWIvczMudHM/OWIzZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUzMgZnJvbSAnYXdzLXNkay9jbGllbnRzL3MzJ1xyXG5cclxuZXhwb3J0IGNvbnN0IHMzID0gbmV3IFMzKHtcclxuICBhcGlWZXJzaW9uOiAnMjAwNi0wMy0wMScsXHJcbiAgYWNjZXNzS2V5SWQ6IHByb2Nlc3MuZW52LlMzX0FDQ0VTU19LRVlfSUQsXHJcbiAgc2VjcmV0QWNjZXNzS2V5OiBwcm9jZXNzLmVudi5TM19TRUNSRVRfQUNDRVNTX0tFWSxcclxuICByZWdpb246IHByb2Nlc3MuZW52LlMzX1JFR0lPTixcclxuICBzaWduYXR1cmVWZXJzaW9uOiAndjQnLFxyXG59KVxyXG4iXSwibmFtZXMiOlsiUzMiLCJzMyIsImFwaVZlcnNpb24iLCJhY2Nlc3NLZXlJZCIsInByb2Nlc3MiLCJlbnYiLCJTM19BQ0NFU1NfS0VZX0lEIiwic2VjcmV0QWNjZXNzS2V5IiwiUzNfU0VDUkVUX0FDQ0VTU19LRVkiLCJyZWdpb24iLCJTM19SRUdJT04iLCJzaWduYXR1cmVWZXJzaW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/s3.ts\n");

/***/ }),

/***/ "(api)/./src/lib/validations/s3.ts":
/*!***********************************!*\
  !*** ./src/lib/validations/s3.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"fileTypeSchema\": () => (/* binding */ fileTypeSchema),\n/* harmony export */   \"s3ResponseSchema\": () => (/* binding */ s3ResponseSchema)\n/* harmony export */ });\n/* harmony import */ var _src_config_s3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/config/s3 */ \"(api)/./src/config/s3.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(zod__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst fileTypeSchema = zod__WEBPACK_IMPORTED_MODULE_1__.z.string().refine((value)=>{\n    return _src_config_s3__WEBPACK_IMPORTED_MODULE_0__.ALLOWED_FILE_TYPES.includes(value);\n}, {\n    message: \"Invalid file type\"\n});\n/**\r\n * fields: provided by AWS to authenticate request\r\n * key: file name in s3 bucket\r\n * getUrl: url to view the file from s3 bucket\r\n * postUrl: url that allows post request to s3 bucket\r\n */ const s3ResponseSchema = zod__WEBPACK_IMPORTED_MODULE_1__.z.object({\n    getUrl: zod__WEBPACK_IMPORTED_MODULE_1__.z.string(),\n    postUrl: zod__WEBPACK_IMPORTED_MODULE_1__.z.string(),\n    fields: zod__WEBPACK_IMPORTED_MODULE_1__.z.object({\n        Policy: zod__WEBPACK_IMPORTED_MODULE_1__.z.string(),\n        \"X-Amz-Algorithm\": zod__WEBPACK_IMPORTED_MODULE_1__.z.string(),\n        \"X-Amz-Credential\": zod__WEBPACK_IMPORTED_MODULE_1__.z.string(),\n        \"X-Amz-Date\": zod__WEBPACK_IMPORTED_MODULE_1__.z.string(),\n        \"X-Amz-Signature\": zod__WEBPACK_IMPORTED_MODULE_1__.z.string(),\n        bucket: zod__WEBPACK_IMPORTED_MODULE_1__.z.string(),\n        key: zod__WEBPACK_IMPORTED_MODULE_1__.z.string()\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL3ZhbGlkYXRpb25zL3MzLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQW9EO0FBQzdCO0FBRWhCLE1BQU1FLGlCQUFpQkQseUNBQVEsR0FBR0csTUFBTSxDQUM3QyxDQUFDQyxRQUFVO0lBQ1QsT0FBT0wsdUVBQTJCLENBQUNLO0FBQ3JDLEdBQ0E7SUFDRUUsU0FBUztBQUNYLEdBQ0Q7QUFFRDs7Ozs7Q0FLQyxHQUVNLE1BQU1DLG1CQUFtQlAseUNBQVEsQ0FBQztJQUN2Q1MsUUFBUVQseUNBQVE7SUFDaEJVLFNBQVNWLHlDQUFRO0lBQ2pCVyxRQUFRWCx5Q0FBUSxDQUFDO1FBQ2ZZLFFBQVFaLHlDQUFRO1FBQ2hCLG1CQUFtQkEseUNBQVE7UUFDM0Isb0JBQW9CQSx5Q0FBUTtRQUM1QixjQUFjQSx5Q0FBUTtRQUN0QixtQkFBbUJBLHlDQUFRO1FBQzNCYSxRQUFRYix5Q0FBUTtRQUNoQmMsS0FBS2QseUNBQVE7SUFDZjtBQUNGLEdBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LXRlbXBsYXRlLy4vc3JjL2xpYi92YWxpZGF0aW9ucy9zMy50cz8zZmY3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFMTE9XRURfRklMRV9UWVBFUyB9IGZyb20gJ0Avc3JjL2NvbmZpZy9zMydcclxuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCdcclxuXHJcbmV4cG9ydCBjb25zdCBmaWxlVHlwZVNjaGVtYSA9IHouc3RyaW5nKCkucmVmaW5lKFxyXG4gICh2YWx1ZSkgPT4ge1xyXG4gICAgcmV0dXJuIEFMTE9XRURfRklMRV9UWVBFUy5pbmNsdWRlcyh2YWx1ZSlcclxuICB9LFxyXG4gIHtcclxuICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGZpbGUgdHlwZScsXHJcbiAgfVxyXG4pXHJcblxyXG4vKipcclxuICogZmllbGRzOiBwcm92aWRlZCBieSBBV1MgdG8gYXV0aGVudGljYXRlIHJlcXVlc3RcclxuICoga2V5OiBmaWxlIG5hbWUgaW4gczMgYnVja2V0XHJcbiAqIGdldFVybDogdXJsIHRvIHZpZXcgdGhlIGZpbGUgZnJvbSBzMyBidWNrZXRcclxuICogcG9zdFVybDogdXJsIHRoYXQgYWxsb3dzIHBvc3QgcmVxdWVzdCB0byBzMyBidWNrZXRcclxuICovXHJcblxyXG5leHBvcnQgY29uc3QgczNSZXNwb25zZVNjaGVtYSA9IHoub2JqZWN0KHtcclxuICBnZXRVcmw6IHouc3RyaW5nKCksXHJcbiAgcG9zdFVybDogei5zdHJpbmcoKSxcclxuICBmaWVsZHM6IHoub2JqZWN0KHtcclxuICAgIFBvbGljeTogei5zdHJpbmcoKSxcclxuICAgICdYLUFtei1BbGdvcml0aG0nOiB6LnN0cmluZygpLFxyXG4gICAgJ1gtQW16LUNyZWRlbnRpYWwnOiB6LnN0cmluZygpLFxyXG4gICAgJ1gtQW16LURhdGUnOiB6LnN0cmluZygpLFxyXG4gICAgJ1gtQW16LVNpZ25hdHVyZSc6IHouc3RyaW5nKCksXHJcbiAgICBidWNrZXQ6IHouc3RyaW5nKCksXHJcbiAgICBrZXk6IHouc3RyaW5nKCksXHJcbiAgfSksXHJcbn0pXHJcbiJdLCJuYW1lcyI6WyJBTExPV0VEX0ZJTEVfVFlQRVMiLCJ6IiwiZmlsZVR5cGVTY2hlbWEiLCJzdHJpbmciLCJyZWZpbmUiLCJ2YWx1ZSIsImluY2x1ZGVzIiwibWVzc2FnZSIsInMzUmVzcG9uc2VTY2hlbWEiLCJvYmplY3QiLCJnZXRVcmwiLCJwb3N0VXJsIiwiZmllbGRzIiwiUG9saWN5IiwiYnVja2V0Iiwia2V5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/validations/s3.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/image/presign.ts":
/*!****************************************!*\
  !*** ./src/pages/api/image/presign.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _src_config_image__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/config/image */ \"(api)/./src/config/image.ts\");\n/* harmony import */ var _src_config_s3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/config/s3 */ \"(api)/./src/config/s3.ts\");\n/* harmony import */ var _src_lib_api_middlewares_with_methods__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/src/lib/api-middlewares/with-methods */ \"(api)/./src/lib/api-middlewares/with-methods.ts\");\n/* harmony import */ var _src_lib_s3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/src/lib/s3 */ \"(api)/./src/lib/s3.ts\");\n/* harmony import */ var _src_lib_validations_s3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/src/lib/validations/s3 */ \"(api)/./src/lib/validations/s3.ts\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! nanoid */ \"(api)/./node_modules/nanoid/index.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(zod__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\n\nconst handler = async (req, res)=>{\n    const reqFileType = req.body.fileType;\n    const fileId = (0,nanoid__WEBPACK_IMPORTED_MODULE_6__.nanoid)();\n    try {\n        // validate file extension, will throw if invalid\n        const fileType = _src_lib_validations_s3__WEBPACK_IMPORTED_MODULE_4__.fileTypeSchema.parse(reqFileType);\n        const fileExtension = fileType.split(\"/\")[1];\n        const key = `${fileId}.${fileExtension}`;\n        // Create a presigned POST request to upload the file to S3\n        const { url: postUrl , fields  } = await new Promise((resolve, reject)=>{\n            _src_lib_s3__WEBPACK_IMPORTED_MODULE_3__.s3.createPresignedPost({\n                Bucket: _src_config_s3__WEBPACK_IMPORTED_MODULE_1__.S3_BUCKET_NAME,\n                Fields: {\n                    key\n                },\n                Expires: 60,\n                Conditions: [\n                    [\n                        \"content-length-range\",\n                        0,\n                        _src_config_image__WEBPACK_IMPORTED_MODULE_0__.MAX_FILE_SIZE\n                    ],\n                    [\n                        \"starts-with\",\n                        \"$Content-Type\",\n                        \"image/\"\n                    ]\n                ]\n            }, (err, signed)=>{\n                if (err) return reject(err);\n                resolve(signed);\n            });\n        });\n        const getUrl = await _src_lib_s3__WEBPACK_IMPORTED_MODULE_3__.s3.getSignedUrlPromise(\"getObject\", {\n            Bucket: _src_config_s3__WEBPACK_IMPORTED_MODULE_1__.S3_BUCKET_NAME,\n            Key: key\n        });\n        return res.status(200).json({\n            postUrl,\n            getUrl,\n            fields\n        });\n    } catch (error) {\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_5__.z.ZodError) {\n            return res.status(415).json(error.issues);\n        }\n        if (error instanceof Error) {\n            return res.status(500).json({\n                error: error.message\n            });\n        }\n        return res.status(500).json({\n            error: \"Something went wrong\"\n        });\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_src_lib_api_middlewares_with_methods__WEBPACK_IMPORTED_MODULE_2__.withMethods)([\n    \"POST\"\n], handler));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2ltYWdlL3ByZXNpZ24udHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQ2tEO0FBQ0Y7QUFDb0I7QUFDbkM7QUFDd0I7QUFFMUI7QUFDUjtBQUV2QixNQUFNTyxVQUFVLE9BQ2RDLEtBQ0FDLE1BQ0c7SUFDSCxNQUFNQyxjQUFjRixJQUFJRyxJQUFJLENBQUNDLFFBQVE7SUFDckMsTUFBTUMsU0FBU1IsOENBQU1BO0lBRXJCLElBQUk7UUFDRixpREFBaUQ7UUFDakQsTUFBTU8sV0FBV1IseUVBQW9CLENBQUNNO1FBQ3RDLE1BQU1LLGdCQUFnQkgsU0FBU0ksS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQzVDLE1BQU1DLE1BQU0sQ0FBQyxFQUFFSixPQUFPLENBQUMsRUFBRUUsY0FBYyxDQUFDO1FBRXhDLDJEQUEyRDtRQUMzRCxNQUFNLEVBQUVHLEtBQUtDLFFBQU8sRUFBRUMsT0FBTSxFQUFFLEdBQUksTUFBTSxJQUFJQyxRQUFRLENBQUNDLFNBQVNDLFNBQVc7WUFDdkVwQiwrREFBc0IsQ0FDcEI7Z0JBQ0VzQixRQUFReEIsMERBQWNBO2dCQUN0QnlCLFFBQVE7b0JBQUVUO2dCQUFJO2dCQUNkVSxTQUFTO2dCQUNUQyxZQUFZO29CQUNWO3dCQUFDO3dCQUF3Qjt3QkFBRzVCLDREQUFhQTtxQkFBQztvQkFDMUM7d0JBQUM7d0JBQWU7d0JBQWlCO3FCQUFTO2lCQUMzQztZQUNILEdBQ0EsQ0FBQzZCLEtBQUtDLFNBQVc7Z0JBQ2YsSUFBSUQsS0FBSyxPQUFPTixPQUFPTTtnQkFDdkJQLFFBQVFRO1lBQ1Y7UUFFSjtRQUVBLE1BQU1DLFNBQVMsTUFBTTVCLCtEQUFzQixDQUFDLGFBQWE7WUFDdkRzQixRQUFReEIsMERBQWNBO1lBQ3RCZ0MsS0FBS2hCO1FBQ1A7UUFFQSxPQUFPUixJQUFJeUIsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFaEI7WUFBU1k7WUFBUVg7UUFBTztJQUN4RCxFQUFFLE9BQU9nQixPQUFPO1FBQ2QsSUFBSUEsaUJBQWlCOUIsMkNBQVUsRUFBRTtZQUMvQixPQUFPRyxJQUFJeUIsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQ0MsTUFBTUUsTUFBTTtRQUMxQyxDQUFDO1FBRUQsSUFBSUYsaUJBQWlCRyxPQUFPO1lBQzFCLE9BQU85QixJQUFJeUIsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBT0EsTUFBTUksT0FBTztZQUFDO1FBQ3JELENBQUM7UUFFRCxPQUFPL0IsSUFBSXlCLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUF1QjtJQUM5RDtBQUNGO0FBRUEsaUVBQWVsQyxrRkFBV0EsQ0FBQztJQUFDO0NBQU8sRUFBRUssUUFBUUEsRUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtdGVtcGxhdGUvLi9zcmMvcGFnZXMvYXBpL2ltYWdlL3ByZXNpZ24udHM/NzZhNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCdcclxuaW1wb3J0IHsgTUFYX0ZJTEVfU0laRSB9IGZyb20gJ0Avc3JjL2NvbmZpZy9pbWFnZSdcclxuaW1wb3J0IHsgUzNfQlVDS0VUX05BTUUgfSBmcm9tICdAL3NyYy9jb25maWcvczMnXHJcbmltcG9ydCB7IHdpdGhNZXRob2RzIH0gZnJvbSAnQC9zcmMvbGliL2FwaS1taWRkbGV3YXJlcy93aXRoLW1ldGhvZHMnXHJcbmltcG9ydCB7IHMzIH0gZnJvbSAnQC9zcmMvbGliL3MzJ1xyXG5pbXBvcnQgeyBmaWxlVHlwZVNjaGVtYSB9IGZyb20gJ0Avc3JjL2xpYi92YWxpZGF0aW9ucy9zMydcclxuaW1wb3J0IHsgUHJlc2lnblJlc3BvbnNlRGF0YSB9IGZyb20gJ0Avc3JjL3R5cGVzL2FwaS9pbWFnZSdcclxuaW1wb3J0IHsgbmFub2lkIH0gZnJvbSAnbmFub2lkJ1xyXG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJ1xyXG5cclxuY29uc3QgaGFuZGxlciA9IGFzeW5jIChcclxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxyXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlPFByZXNpZ25SZXNwb25zZURhdGE+XHJcbikgPT4ge1xyXG4gIGNvbnN0IHJlcUZpbGVUeXBlID0gcmVxLmJvZHkuZmlsZVR5cGVcclxuICBjb25zdCBmaWxlSWQgPSBuYW5vaWQoKVxyXG5cclxuICB0cnkge1xyXG4gICAgLy8gdmFsaWRhdGUgZmlsZSBleHRlbnNpb24sIHdpbGwgdGhyb3cgaWYgaW52YWxpZFxyXG4gICAgY29uc3QgZmlsZVR5cGUgPSBmaWxlVHlwZVNjaGVtYS5wYXJzZShyZXFGaWxlVHlwZSlcclxuICAgIGNvbnN0IGZpbGVFeHRlbnNpb24gPSBmaWxlVHlwZS5zcGxpdCgnLycpWzFdXHJcbiAgICBjb25zdCBrZXkgPSBgJHtmaWxlSWR9LiR7ZmlsZUV4dGVuc2lvbn1gXHJcblxyXG4gICAgLy8gQ3JlYXRlIGEgcHJlc2lnbmVkIFBPU1QgcmVxdWVzdCB0byB1cGxvYWQgdGhlIGZpbGUgdG8gUzNcclxuICAgIGNvbnN0IHsgdXJsOiBwb3N0VXJsLCBmaWVsZHMgfSA9IChhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIHMzLmNyZWF0ZVByZXNpZ25lZFBvc3QoXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgQnVja2V0OiBTM19CVUNLRVRfTkFNRSxcclxuICAgICAgICAgIEZpZWxkczogeyBrZXkgfSxcclxuICAgICAgICAgIEV4cGlyZXM6IDYwLFxyXG4gICAgICAgICAgQ29uZGl0aW9uczogW1xyXG4gICAgICAgICAgICBbJ2NvbnRlbnQtbGVuZ3RoLXJhbmdlJywgMCwgTUFYX0ZJTEVfU0laRV0sXHJcbiAgICAgICAgICAgIFsnc3RhcnRzLXdpdGgnLCAnJENvbnRlbnQtVHlwZScsICdpbWFnZS8nXSxcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICAoZXJyLCBzaWduZWQpID0+IHtcclxuICAgICAgICAgIGlmIChlcnIpIHJldHVybiByZWplY3QoZXJyKVxyXG4gICAgICAgICAgcmVzb2x2ZShzaWduZWQpXHJcbiAgICAgICAgfVxyXG4gICAgICApXHJcbiAgICB9KSkgYXMgeyB1cmw6IHN0cmluZzsgZmllbGRzOiBhbnkgfVxyXG5cclxuICAgIGNvbnN0IGdldFVybCA9IGF3YWl0IHMzLmdldFNpZ25lZFVybFByb21pc2UoJ2dldE9iamVjdCcsIHtcclxuICAgICAgQnVja2V0OiBTM19CVUNLRVRfTkFNRSxcclxuICAgICAgS2V5OiBrZXksXHJcbiAgICB9KVxyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHBvc3RVcmwsIGdldFVybCwgZmllbGRzIH0pXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIHouWm9kRXJyb3IpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDE1KS5qc29uKGVycm9yLmlzc3VlcylcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnU29tZXRoaW5nIHdlbnQgd3JvbmcnIH0pXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB3aXRoTWV0aG9kcyhbJ1BPU1QnXSwgaGFuZGxlcilcclxuIl0sIm5hbWVzIjpbIk1BWF9GSUxFX1NJWkUiLCJTM19CVUNLRVRfTkFNRSIsIndpdGhNZXRob2RzIiwiczMiLCJmaWxlVHlwZVNjaGVtYSIsIm5hbm9pZCIsInoiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwicmVxRmlsZVR5cGUiLCJib2R5IiwiZmlsZVR5cGUiLCJmaWxlSWQiLCJwYXJzZSIsImZpbGVFeHRlbnNpb24iLCJzcGxpdCIsImtleSIsInVybCIsInBvc3RVcmwiLCJmaWVsZHMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImNyZWF0ZVByZXNpZ25lZFBvc3QiLCJCdWNrZXQiLCJGaWVsZHMiLCJFeHBpcmVzIiwiQ29uZGl0aW9ucyIsImVyciIsInNpZ25lZCIsImdldFVybCIsImdldFNpZ25lZFVybFByb21pc2UiLCJLZXkiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJab2RFcnJvciIsImlzc3VlcyIsIkVycm9yIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/image/presign.ts\n");

/***/ }),

/***/ "(api)/./node_modules/nanoid/index.js":
/*!**************************************!*\
  !*** ./node_modules/nanoid/index.js ***!
  \**************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"customAlphabet\": () => (/* binding */ customAlphabet),\n/* harmony export */   \"customRandom\": () => (/* binding */ customRandom),\n/* harmony export */   \"nanoid\": () => (/* binding */ nanoid),\n/* harmony export */   \"random\": () => (/* binding */ random),\n/* harmony export */   \"urlAlphabet\": () => (/* reexport safe */ _url_alphabet_index_js__WEBPACK_IMPORTED_MODULE_1__.urlAlphabet)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var _url_alphabet_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./url-alphabet/index.js */ \"(api)/./node_modules/nanoid/url-alphabet/index.js\");\n\n\n\nconst POOL_SIZE_MULTIPLIER = 128\nlet pool, poolOffset\nlet fillPool = bytes => {\n  if (!pool || pool.length < bytes) {\n    pool = Buffer.allocUnsafe(bytes * POOL_SIZE_MULTIPLIER)\n    ;(0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomFillSync)(pool)\n    poolOffset = 0\n  } else if (poolOffset + bytes > pool.length) {\n    (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomFillSync)(pool)\n    poolOffset = 0\n  }\n  poolOffset += bytes\n}\nlet random = bytes => {\n  fillPool((bytes -= 0))\n  return pool.subarray(poolOffset - bytes, poolOffset)\n}\nlet customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (31 - Math.clz32((alphabet.length - 1) | 1))) - 1\n  let step = Math.ceil((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let i = step\n      while (i--) {\n        id += alphabet[bytes[i] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nlet customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nlet nanoid = (size = 21) => {\n  fillPool((size -= 0))\n  let id = ''\n  for (let i = poolOffset - size; i < poolOffset; i++) {\n    id += _url_alphabet_index_js__WEBPACK_IMPORTED_MODULE_1__.urlAlphabet[pool[i] & 63]\n  }\n  return id\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmFub2lkL2luZGV4LmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBdUM7QUFDYztBQUMvQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSx1REFBYztBQUNsQjtBQUNBLElBQUk7QUFDSixJQUFJLHNEQUFjO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ087QUFDUDtBQUNBO0FBQ0Esa0NBQWtDLGdCQUFnQjtBQUNsRCxVQUFVLCtEQUFXO0FBQ3JCO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtdGVtcGxhdGUvLi9ub2RlX21vZHVsZXMvbmFub2lkL2luZGV4LmpzPzZiZjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmFuZG9tRmlsbFN5bmMgfSBmcm9tICdjcnlwdG8nXG5pbXBvcnQgeyB1cmxBbHBoYWJldCB9IGZyb20gJy4vdXJsLWFscGhhYmV0L2luZGV4LmpzJ1xuZXhwb3J0IHsgdXJsQWxwaGFiZXQgfVxuY29uc3QgUE9PTF9TSVpFX01VTFRJUExJRVIgPSAxMjhcbmxldCBwb29sLCBwb29sT2Zmc2V0XG5sZXQgZmlsbFBvb2wgPSBieXRlcyA9PiB7XG4gIGlmICghcG9vbCB8fCBwb29sLmxlbmd0aCA8IGJ5dGVzKSB7XG4gICAgcG9vbCA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShieXRlcyAqIFBPT0xfU0laRV9NVUxUSVBMSUVSKVxuICAgIHJhbmRvbUZpbGxTeW5jKHBvb2wpXG4gICAgcG9vbE9mZnNldCA9IDBcbiAgfSBlbHNlIGlmIChwb29sT2Zmc2V0ICsgYnl0ZXMgPiBwb29sLmxlbmd0aCkge1xuICAgIHJhbmRvbUZpbGxTeW5jKHBvb2wpXG4gICAgcG9vbE9mZnNldCA9IDBcbiAgfVxuICBwb29sT2Zmc2V0ICs9IGJ5dGVzXG59XG5leHBvcnQgbGV0IHJhbmRvbSA9IGJ5dGVzID0+IHtcbiAgZmlsbFBvb2woKGJ5dGVzIC09IDApKVxuICByZXR1cm4gcG9vbC5zdWJhcnJheShwb29sT2Zmc2V0IC0gYnl0ZXMsIHBvb2xPZmZzZXQpXG59XG5leHBvcnQgbGV0IGN1c3RvbVJhbmRvbSA9IChhbHBoYWJldCwgZGVmYXVsdFNpemUsIGdldFJhbmRvbSkgPT4ge1xuICBsZXQgbWFzayA9ICgyIDw8ICgzMSAtIE1hdGguY2x6MzIoKGFscGhhYmV0Lmxlbmd0aCAtIDEpIHwgMSkpKSAtIDFcbiAgbGV0IHN0ZXAgPSBNYXRoLmNlaWwoKDEuNiAqIG1hc2sgKiBkZWZhdWx0U2l6ZSkgLyBhbHBoYWJldC5sZW5ndGgpXG4gIHJldHVybiAoc2l6ZSA9IGRlZmF1bHRTaXplKSA9PiB7XG4gICAgbGV0IGlkID0gJydcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgbGV0IGJ5dGVzID0gZ2V0UmFuZG9tKHN0ZXApXG4gICAgICBsZXQgaSA9IHN0ZXBcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgaWQgKz0gYWxwaGFiZXRbYnl0ZXNbaV0gJiBtYXNrXSB8fCAnJ1xuICAgICAgICBpZiAoaWQubGVuZ3RoID09PSBzaXplKSByZXR1cm4gaWRcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmV4cG9ydCBsZXQgY3VzdG9tQWxwaGFiZXQgPSAoYWxwaGFiZXQsIHNpemUgPSAyMSkgPT5cbiAgY3VzdG9tUmFuZG9tKGFscGhhYmV0LCBzaXplLCByYW5kb20pXG5leHBvcnQgbGV0IG5hbm9pZCA9IChzaXplID0gMjEpID0+IHtcbiAgZmlsbFBvb2woKHNpemUgLT0gMCkpXG4gIGxldCBpZCA9ICcnXG4gIGZvciAobGV0IGkgPSBwb29sT2Zmc2V0IC0gc2l6ZTsgaSA8IHBvb2xPZmZzZXQ7IGkrKykge1xuICAgIGlkICs9IHVybEFscGhhYmV0W3Bvb2xbaV0gJiA2M11cbiAgfVxuICByZXR1cm4gaWRcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/nanoid/index.js\n");

/***/ }),

/***/ "(api)/./node_modules/nanoid/url-alphabet/index.js":
/*!***************************************************!*\
  !*** ./node_modules/nanoid/url-alphabet/index.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"urlAlphabet\": () => (/* binding */ urlAlphabet)\n/* harmony export */ });\nconst urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmFub2lkL3VybC1hbHBoYWJldC9pbmRleC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUCIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtdGVtcGxhdGUvLi9ub2RlX21vZHVsZXMvbmFub2lkL3VybC1hbHBoYWJldC9pbmRleC5qcz84N2FiIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCB1cmxBbHBoYWJldCA9XG4gICd1c2VhbmRvbS0yNlQxOTgzNDBQWDc1cHhKQUNLVkVSWU1JTkRCVVNIV09MRl9HUVpiZmdoamtscXZ3eXpyaWN0J1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/nanoid/url-alphabet/index.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./src/pages/api/image/presign.ts"));
module.exports = __webpack_exports__;

})();